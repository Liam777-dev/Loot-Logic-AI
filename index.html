<!DOCTYPE html>

<html lang="es">

<head>

    <meta charset="UTF-8">

    <title>Loot Logic AI</title>

    <style>

        :root {

            --bg: #1e1e1e;

            --card-bg: #2d2d2d;

            --accent: #2ecc71;

            --text: #ffffff;

            --sub-text: #b3b3b3;

            --error: #ff4444;

        }



        body {

            background-color: var(--bg);

            color: var(--text);

            font-family: 'Segoe UI', sans-serif;

            margin: 0;

            padding: 20px;

        }



        /* Top Bar */

        .top-bar {

            display: flex;

            justify-content: space-between;

            align-items: center;

            padding: 10px 40px;

        }



        .status-container {

            display: flex;

            align-items: center;

            gap: 15px;

        }



        .status-dot { color: var(--error); font-size: 13px; font-weight: bold; }



        .btn-reconnect {

            background: transparent;

            border: 1px solid #444;

            color: var(--sub-text);

            padding: 5px 12px;

            border-radius: 4px;

            font-size: 11px;

            cursor: pointer;

            font-weight: bold;

            transition: 0.2s;

        }

        .btn-reconnect:hover { border-color: var(--accent); color: white; }



        .btn-pay {

            background: var(--accent);

            color: black;

            padding: 8px 20px;

            border-radius: 5px;

            text-decoration: none;

            font-weight: bold;

            font-size: 14px;

        }



        /* Grid de Cards */

        .dashboard-grid {

            display: flex;

            justify-content: center;

            gap: 20px;

            margin: 40px 0;

        }



        .card {

            background: var(--card-bg);

            width: 220px;

            height: 130px;

            border-radius: 12px;

            padding: 20px;

            position: relative;

            cursor: pointer;

            transition: 0.3s;

        }



        .card:hover { background: #383838; }

        .card h3 { margin: 10px 0; font-size: 16px; }

        .badge {

            position: absolute;

            top: 15px;

            right: 15px;

            background: #111;

            font-size: 10px;

            padding: 3px 8px;

            border-radius: 4px;

            color: var(--sub-text);

        }



        /* Consola de Progreso */

        .main-display {

            max-width: 900px;

            margin: 0 auto;

            background: #121212;

            border-radius: 10px;

            border: 1px solid #333;

            padding: 20px;

        }



        #log-screen {

            height: 150px;

            overflow-y: auto;

            font-family: monospace;

            color: var(--sub-text);

            margin-bottom: 20px;

            border-bottom: 1px solid #222;

        }



        /* Barra de Entrada Inferior */

        .input-box {

            display: flex;

            gap: 15px;

            background: #252525;

            padding: 10px;

            border-radius: 8px;

        }



        input {

            flex-grow: 1;

            background: transparent;

            border: none;

            color: white;

            font-size: 16px;

            outline: none;

        }



        .btn-gen {

            background: var(--accent);

            border: none;

            padding: 10px 25px;

            border-radius: 5px;

            font-weight: bold;

            cursor: pointer;

        }



        .btn-gen:disabled { background: #555; cursor: not-allowed; }



        .credit-footer {

            text-align: center;

            margin-top: 30px;

            color: var(--sub-text);

            font-size: 14px;

        }



        .ad-btn { color: var(--accent); cursor: pointer; font-weight: bold; margin-left: 10px; }

    </style>

</head>

<body>



    <div class="top-bar">

        <div style="font-size: 22px; font-weight: bold;">Loot Logic AI</div>

        <div style="display: flex; align-items: center; gap: 30px;">

            <div class="status-container">

                <span id="status-text" class="status-dot">● PLUGIN NOT CONNECTED</span>

                <button class="btn-reconnect" onclick="checkServer()">RECONNECT</button>

            </div>

            <a href="https://paypal.me/peypalLiam" target="_blank" class="btn-pay">Donaciones</a>

        </div>

    </div>



    <div class="dashboard-grid">

        <div class="card" onclick="alert('Función de limpieza pronto...')">

            <h3>Clean Start</h3>

            <p style="font-size: 12px; color: var(--sub-text);">Limpia el Workspace al instante.</p>

        </div>

        <div class="card">

            <span class="badge">COMING SOON</span>

            <h3>Remix Game</h3>

            <p style="font-size: 12px; color: var(--sub-text);">Mejora juegos existentes.</p>

        </div>

    </div>



    <div class="main-display">

        <div id="log-screen">Iniciando sistema... Por favor conecta el plugin en Roblox Studio para empezar.</div>

        <div class="input-box">

            <input type="text" id="prompt-input" placeholder="Describe el script que necesitas..." disabled>

            <button id="gen-btn" class="btn-gen" onclick="startProcess()" disabled>GENERAR SCRIPT</button>

        </div>

    </div>



    <div class="credit-footer">

        Créditos: <span id="cred-count">10</span>/10 

        <span id="ad-link" class="ad-btn" onclick="getAd()" style="display:none;">[+3 Créditos por Anuncio]</span>

    </div>



    <script>

        let credits = 10;

        let running = false;



        async function checkServer() {

            const statusLabel = document.getElementById('status-text');

            const inp = document.getElementById('prompt-input');

            const btn = document.getElementById('gen-btn');

            

            // Efecto visual de intento

            if(statusLabel.innerText.includes("NOT")) statusLabel.innerText = "● ATTEMPTING CONNECTION...";



            try {

                const check = await fetch('https://loot-logic-ai-1.onrender.com/status');

                if(check.ok) {

                    statusLabel.innerText = "● PLUGIN CONNECTED";

                    statusLabel.style.color = "#2ecc71";

                    if(!running) {

                        inp.disabled = false;

                        btn.disabled = false;

                    }

                }

            } catch(e) {

                statusLabel.innerText = "● PLUGIN NOT CONNECTED";

                statusLabel.style.color = "#ff4444";

                if(!running) {

                    inp.disabled = true;

                    btn.disabled = true;

                }

            }

        }



        setInterval(checkServer, 5000); // Comprobación automática cada 5 seg



        async function startProcess() {

            const inp = document.getElementById('prompt-input');

            const btn = document.getElementById('gen-btn');

            const log = document.getElementById('log-screen');



            if(credits <= 0) return alert("Sin créditos.");



            running = true;

            inp.disabled = true;

            btn.disabled = true;

            

            log.innerHTML += `<div style="color: #f1c40f;">> Solicitud enviada: ${inp.value}</div>`;



            try {

                const res = await fetch('https://loot-logic-ai-1.onrender.com/generate', {

                    method: 'POST',

                    headers: {'Content-Type': 'application/json'},

                    body: JSON.stringify({prompt: inp.value})

                });



                if(res.ok) {

                    credits--;

                    updateUI();

                    log.innerHTML += `<div>[IA]: Generando código...</div>`;

                    log.innerHTML += `<div style="color: #3498db;">[ROBLOX]: Aplicando cambios en el Studio. Espera...</div>`;

                    

                    setTimeout(() => {

                        log.innerHTML += `<div style="color: #2ecc71;">[SISTEMA]: Cambios aplicados con éxito.</div>`;

                        running = false;

                        inp.disabled = false;

                        btn.disabled = false;

                        inp.value = "";

                        log.scrollTop = log.scrollHeight; // Auto-scroll al final

                    }, 8000);

                } else { throw new Error(); }

            } catch(e) {

                log.innerHTML += `<div style="color: #e74c3c;">[ERROR]: Fallo de conexión. Créditos mantenidos.</div>`;

                running = false;

                inp.disabled = false;

                btn.disabled = false;

            }

        }



        function updateUI() {

            document.getElementById('cred-count').innerText = credits;

            document.getElementById('ad-link').style.display = credits < 3 ? 'inline' : 'none';

        }



        function getAd() {

            alert("Cargando anuncio...");

            setTimeout(() => {

                credits += 3;

                updateUI();

                alert("Recibiste 3 créditos adicionales.");

            }, 2000);

        }

    </script>

</body>



</html>
